platform: linux

caches:
  - path: /cache

run:
  path: bash
  args:
    - -ec
    - |
      ls -lah /var/runtimes/docker
      echo $BASH_ENV
      echo $ENV
      echo $PATH
      
      java --version
      sdk use java 25-graalce
      echo "JAVA: $(java --version)"
      
      native-image --help
      
      echo "YARN: $(yarn --version)"
      echo "PNPM: $(pnpm --version)"
      echo "NPM: $(npm --version)"
      
      docker --version
      
      echo "FROM alpine" > Dockerfile
      docker build -t runtime-test .
      
      docker run -d --name nginx-server -p 8080:80 docker.io/nginx
      sleep 5
      docker stop nginx-server
      
      docker run -d --name nginx-server-old -p 8080:80 docker.io/nginx:1.28.0
      sleep 5
      docker stop nginx-server
      
      # Do the hooks work?
      gomplate --version
      curl --help
      wget --help
      git --version
